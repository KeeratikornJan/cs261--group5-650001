<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
</head>
<body>
    <header></header>
    <nav class="navbar">
            <div class="navdiv">
                <div class="logo"><a href="#">TU EVENT</a> </div>
                <ul>
                    <li class="navbutton"><a href="#">หน้าหลัก</a></li>
                    <li class="navbutton">
                        <a href="#">อีเว้นท์<i class="material-icons">keyboard_arrow_down</i></a>
                        <ul class="dropdown">
                            <a>ประเภทอีเว้นท์</a>
                            <div class="dropdown_item">
                                <li><a href="#">ทั้งหมด</a></li>
                                <li><a href="#">ค่าย</a></li>
                                <li><a href="#">กิจกรรม</a></li>
                                <li><a href="#">ดนตรี</a></li>
                                <li><a href="#">เทคโนโลยี</a></li>
                                <li><a href="#">กีฬา</a></li>
                                <li><a href="#">แข่งขัน</a></li>
                                <li><a href="#">เวิร์คชอป</a></li>
                                <li><a href="#">ศิลปะ</a></li>
                                <li><a href="#">วิชาการ</a></li>
                                <li><a href="#">การเงิน</a></li>
                                <li><a href="#">ธุรกิจ</a></li>
                            </div>
                        </ul>
                    </li>
                    <li class="navbutton">
                        <a href="#">สำหรับผู้จัด<i class="material-icons">keyboard_arrow_down</i></a>
                        <ul class="dropdown">
                            <a>สำหรับผู้จัด</a>
                            <div class="dropdown_item">
                                <li><a href="#">ยังไม่ต้องทำ</a></li>
                            </div>
                        </ul>
                    </li>
                </ul>
                <button><a href="#">เข้าสู่ระบบ/สมัครสมาชิก</a></button>
            </div>
        </nav>
    <section>
        <div class="container1">
            <div class="poster">
                <img src="Resourse/Poster/" alt="IMG1_Library">
            </div>
            <button class="button_reg">
                <a href="#">ลงทะเบียน</a>
            </button>
        </div>
        <div class="container2">
            <div class="detail">
                <h1 id="title">ชื่ออีเว้นท์</h1>
                <div class="catagories">
                    <a id="category" href="#">หมวดหมู่</a>
                </div>
                <p id="date"><i class="material-icons">calendar_month</i></p>
                <p id="time"><i class="material-icons">schedule</i></p>
                <div class="box_members">
                    <h2>จำนวนผู้ลงทะเบียน</h2>
                    <div class="box_members_num">
                        <p class="box_members_num" id="capacity"><i class="material-icons">person</i>0</p>
						</div>  
                <div class="box_organizes">
                    <h1>ผู้จัด</h1>
                   <p id="organizer">-</p>
				   </div>
                <div class="box_details">
                    <h1>รายละเอียด</h1>
                    <p id="detail">-</p></div>
            </div>
        </div>
    </section>
    <footer>
        <img src="Resourse/Footer.png" alt="Footer">
    </footer>
	// ใส่สคริปต์ดึงข้อมูลจริง 
	<script>
	  const s = (sel) => document.querySelector(sel);
	  const $ = s; // <- ถ้าชอบเขียนแบบ $, ทำ alias ไว้เลย

	  const fmt = (d) =>
	    !d ? '-' : new Date(d).toLocaleDateString('th-TH',{
	      day:'2-digit', month:'short', year:'numeric'
	    });

	  function setText(el, text) {
	    if (!el) return;
	    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.value = text ?? '-';
	    else el.textContent = text ?? '-';
	  }

	  async function loadDetail() {
	    try {
	      const id = new URLSearchParams(location.search).get('id');
	      if (!id) {
	        document.body.insertAdjacentHTML('beforeend','<p>กรุณาระบุ id</p>');
	        return;
	      }

	      const res = await fetch(`/api/events/${id}`);
	      if (!res.ok) {
	        document.body.insertAdjacentHTML('beforeend','<p>โหลดข้อมูลไม่สำเร็จ</p>');
	        return;
	      }

	      const ev = await res.json();

	      setText($('#title'), ev.title);
	      $('#category').textContent = ev.category?.categoryName ?? '-';

	      $('#date').innerHTML =
	        `<i class="material-icons">calendar_month</i> ${fmt(ev.startDate)} - ${fmt(ev.endDate)}`;
			$('#capacity').innerHTML = `<i class="material-icons">person</i>${ev.capacity ?? 0}`;
	      $('#time').innerHTML =
	        `<i class="material-icons">schedule</i> ${ev.time ?? '-'}`;

	      setText($('#organizer'), ev.organizer);
	      setText($('#detail'), ev.detail);

	      const img = document.querySelector('.poster img');
	      if (img) img.src = ev.imageUrl || '/Resourse/Poster/Header.png';
	    } catch (err) {
	      console.error(err);
	      document.body.insertAdjacentHTML('beforeend','<p>เกิดข้อผิดพลาดขณะโหลดข้อมูล</p>');
	    }
	  }

	  loadDetail();
	</script>


</body>
</html>